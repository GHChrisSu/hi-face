---
title: 4.4【未写】人脸贴纸移动技巧
---


* 核心算法：怎么实现口罩的实时转动
  * 当 touchstart 时，保存此时的 touch 起始点，并以此时的底图和口罩位置作为旋转角度和缩放比例值计算的参考点
  * 当 touchmove 时，根据起始点 和 临时的终止点 计算在 x/y 方向上的移动距离，计算参考点分别 加上这个距离，得到移动后的位置，通过移动前后的位置 计算移动前后位置的变动 计算旋转角和缩放比例
  * 当 touchend 时，重置底图和口罩的位置及旋转角和缩放比例

去除缩放比例

缩放比例，四个点就得分别计算
而用实际宽高及位置调整后，四个点就可以定位到正方形的四个角上。

有待思考，比较欠缺的地方？
canvas有类似的图形操作库，但div方式的，还未找到特别理想的！

参考 shape-edit仓库中的代码


px与rpx转换


